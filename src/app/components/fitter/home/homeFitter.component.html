<div id="pai" class="col m10 s12 l10">
  <div class="row">
    <div class="col m10 s12">
      <table class="highlight centered">
        <thead>
          <tr>
            <th>Serviço</th>
            <th>Descrição</th>
            <th>Endereço</th>
            <!-- <th>
              <button mz-button (click)="sidenav.opened = !sidenav.opened" id="sidenav-btn">
                Open
              </button>
            </th> -->
          </tr>
        </thead>
        <tbody>
          <mz-spinner [hidden]="!loading" [color]="'blue'" [size]="'small'">
          </mz-spinner>
          <tr class="collection-item avatar" *ngFor='let oferta of ofertas' (click)="SelecionaOferta(oferta, bottomSheetModal);">
            <td>{{oferta.serviceType.description}}</td>
            <td>{{oferta.description}}</td>
            <td>
              <p>
                {{oferta.address}}, {{oferta.number}} {{oferta.region}} {{oferta.city}}, {{oferta.state}}
                <br> {{oferta.cep}}
              </p>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="row" style="margin-top:25%;">
    <div class="col m10 s12">
      <mz-spinner [hidden]="!loadingserv" [color]="'blue'" [size]="'small'">
      </mz-spinner>

      <span *ngIf="!servicos">
        <i class="material-icons ">error_outline</i> Você não está em nenhum serviço atualmente</span>
      <ul class="collection with-header">
        <li class="collection-item" *ngFor='let servico of servicos'>
          <span>{{servico.serviceType}}</span>
          <p>{{servico.status}}
            <br> {{servico.value}}
            <br> {{servico.comments}}
          </p>
        </li>
      </ul>
    </div>
  </div>
</div>

<!-- <mz-sidenav #sidenav [id]="'sidenav-demo'" [collapseButtonId]="'sidenav-btn'" [fixed]="true" [draggable]="false">
  <mz-sidenav-header>
    Sidenav header
  </mz-sidenav-header>
  <mz-sidenav-subheader>Link Subheader</mz-sidenav-subheader>
  <mz-sidenav-link>
    <a href="#">First Link</a>
  </mz-sidenav-link>
  <mz-sidenav-divider></mz-sidenav-divider>
  <mz-sidenav-link [active]="true">
    <a href="#">Active Link</a>
  </mz-sidenav-link>
  <mz-sidenav-divider></mz-sidenav-divider>
  <mz-sidenav-link>
    <a href="#" class="waves-effect">Second Link With Waves</a>
  </mz-sidenav-link>
</mz-sidenav> -->




<mz-modal #bottomSheetModal [fixedFooter]="true" [bottomSheet]="false" [options]="modalOptions">
  <mz-modal-header>
    <h4>Oferta</h4>
  </mz-modal-header>
  <mz-modal-content style="background-color: azure;">
    <div class="row">
      <!-- PRIMEIRA COLUNA -->
      <form [formGroup]="form" >
        <div class="col m5 s12">
          <div class="row">
            <div class="col m2 s12">
              <label for="serviceType">Tipo de Serviço</label>
              <input type="text" value="{{ofertaServico?.serviceType?.description}}" class="form-control" readonly>
            </div>
            <div class="col m5 s12">
              <label for="description">Descrição do Problema</label>
              <input type="text" value="{{ofertaServico?.description}}" class="form-control" readonly>
            </div>
          </div>
          <div class="row">
            <div class="col m3 s12">
              <label>Nome do Solicitante</label>
              <input type="text" value="{{client?.name}}" class="form-control" readonly>
            </div>
            <div class="col m1 s2">
              <label>Gênero</label>
              <input type="text" value="{{client?.genre}}" class="form-control" readonly>
            </div>
            <div class="col m3 s6">
              <label>Telefone para contato </label>
              <input type="text" value="{{client?.cellPhone}}" class="form-control" disabled>
            </div>
          </div>
          <div class="row">
            <div class="col m3 s6">
              <label>Endereço</label>
              <input type="text" formControlName="Address" value="{{ofertaServico?.address}}" class="form-control" readonly>
            </div>
            <div class="col m1 s6">
              <label>Nº</label>
              <input type="text" formControlName="Number" value="{{ofertaServico?.number}}" class="form-control" readonly>
            </div>
            <div class="col m3 s6">
              <label>Bairro</label>
              <input type="text" formControlName="Region" value="{{ofertaServico?.region}}" class="form-control" readonly>
            </div>
          </div>
          <div class="row">
            <div class="col m2 s6">
              <label>Cidade</label>
              <input type="text" formControlName="City" value="{{ofertaServico?.city}}" class="form-control" readonly>
            </div>
            <div class="col m1 s6">
              <label>Estado</label>
              <input type="text" formControlName="State" value="{{ofertaServico?.state}}" class="form-control" readonly>
            </div>
            <div class="col m2 s6">
              <label>CEP</label>
              <input type="text" formControlName="CEP" value="{{ofertaServico?.cep}}" class="form-control" readonly>
            </div>
          </div>
        </div>
        <!-- fim primeira-->

        <!-- SEGUNDA COLUNA -->
        <div class="col m6 s12 border">

          <div class="input-field col m12 s12">
            <i class="material-icons prefix">mode_edit</i>
            <textarea id="icon_prefix2" formControlName="Comments" class="materialize-textarea"></textarea>
            <label for="icon_prefix2">Comentário</label>
          </div>
          <div class="input-field col m2 s6">
            <input type="number" formControlName="Value" min="0" step="0.1" id="valor">
            <label for="Value">Valor</label>
          </div>
          <div class="input-field col m6 s6">
            <input mz-input mz-validation required type="text" placeholder="__:__ (hora/minuto)" formControlName="ApproximateTime" id="tempo">
            <label for="ApproximateTime">Tempo Estimado</label>
          </div>
        </div>
      </form>
    </div>
  </mz-modal-content>
  <mz-modal-footer>
    <button mz-button [flat]="true" mz-modal-close>Cancelar</button>
    <button mz-button type="button" [flat]="true" [disabled]="!form.valid" (click)="Salvar();">Enviar</button>
  </mz-modal-footer>
</mz-modal>